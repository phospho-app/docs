---
title: Analyze your logs in Python
description: "Run custom analytics jobs in Python on your phospho logs"
---

Use the `phospho` Python package to run custom analytics jobs on your logs.

## Setup

Instal the package and set your API key and project ID as environment variables.

```bash 
pip install phospho pandas
export PHOSPHO_API_KEY=your_api_key
export PHOSPHO_PROJECT_ID=your_project_id
```

## Load data

The best way to analyze your logs is to load them into a [pandas](https://pandas.pydata.org) DataFrame. This format is compatible with most analytics libraries.

### One row = one (task, event) pair

Phospho provides a `tasks_df` method to load the logs into a flattened DataFrame. Note that you need to have the `pandas` package installed to use this method.

```python
import phospho 

phospho.init()
phospho.tasks_df(limit=1000) # Load the latest 1000 tasks
```

This will return a DataFrame where one row is one (task, event) pair. 

Example:

| task_id | task_input | task_output | task_metadata | task_eval | task_eval_source | task_eval_at | task_created_at | session_id | event_name | event_created_at |
|---------|------------|-------------|---------------|-----------|------------------|--------------|-----------------|------------|------------|------------------|
| b58aacc6102f4a5e9d2364202ce23bf2 | Some input | Some output | \{'client_created_at': 1709925970, 'last_update... | success | owner | 2024-03-08 19:27:49 | 2024-03-09 15:09:31 | 71ee278ab2874666ae157c28a69c1679 | correction by user | 2024-03-08 19:27:43 |
| b58aacc6102f4a5e9d2364202ce23bf2 | Some input | Some output | \{'client_created_at': 1709925970, 'last_update... | success | owner | 2024-03-08 19:27:49 | 2024-03-09 15:09:31 | 71ee278ab2874666ae157c28a69c1679 | user frustration indication | 2024-03-08 19:27:43 |
| b58aacc6102f4a5e9d2364202ce23bf2 | Some input | Some output | \{'client_created_at': 1709925970, 'last_update... | success | owner | 2024-03-08 19:27:49 | 2024-03-09 15:09:31 | 71ee278ab2874666ae157c28a69c1679 | follow-up question | 2024-03-08 19:27:43 |

This means that:
- If a task has multiple events, there will be multiple rows with the same `task_id` and different `event_name`.
- If a task has no events, it will have one row with `event_name` as `None`.

### One row = one task

If you want one row to be one task, drop the duplicates on `task_id`. Ignore the columns starting with `event_` as they are not relevant in this case.

```python
phospho.tasks_df(limit=1000).drop_duplicates('task_id')
```

Example:

|task_id | task_input | task_output | task_metadata | task_eval | task_eval_source | task_eval_at | task_created_at | session_id | event_name | event_created_at |
|---|---|---|---|---|---|---|---|---|---|---|
|21f3b21e8646402d930f1a02159e942f | Some input | Some output | \{'client_created_at':42f'... | failure | owner | 2024-03-08 19:53:59 | 2024-03-09 16:45:18 | a6b1b4224f874608b6037d41d582286a | | |
|64382c6093b04a028a97a14131a4ab32 | Some input | Some output | \{'client_created_at':42f'... | success | owner | 2024-03-08 19:27:48 | 2024-03-09 15:51:07 | 9d13562051a84d6c806d4e6f6a58fb37 | | |
|b58aacc6102f4a5e9d2364202ce23bf2 | Some input | Some output | \{'client_created_at':42f'... | success | owner | 2024-03-08 19:27:49 | 2024-03-09 15:09:31 | 71ee278ab2874666ae157c28a69c1679 | correction by user | 2024-03-08 19:27:43 |



## Run custom analytics jobs

To run custom analytics jobs, use the phospho lab.

<Card title="Discover the phospho lab" href="/local/quickstart">
Set up the phospho lab to run custom analytics jobs on your logs
</Card>

## Push updated data

Once you've run your analytics jobs, you can push the updated data back to phospho.

<Card title="Coming soon!" icon="traffic-cone">
We'll be shipping this feature shortly! Stay tuned.
</Card>